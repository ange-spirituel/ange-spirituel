(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[721],{7699:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ask",function(){return n(6395)}])},9402:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5893);function s(){return(0,r.jsx)("footer",{style:{marginTop:"50px",padding:"20px",textAlign:"center",fontSize:"0.9rem",color:"#ccc"},children:(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Ange R\xe9pond \xb7 Tous droits r\xe9serv\xe9s"]})})}},4954:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(5893),s=n(1664),a=n.n(s);function i(){return(0,r.jsxs)("header",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"20px",textAlign:"center",borderBottom:"1px solid rgba(255, 255, 255, 0.2)"},children:[(0,r.jsx)("h2",{style:{fontSize:"1.8rem",marginBottom:"10px"},children:"\uD83D\uDC7C Ange R\xe9pond"}),(0,r.jsxs)("nav",{style:{display:"flex",justifyContent:"center",gap:"20px"},children:[(0,r.jsx)(a(),{href:"/",children:"Accueil"}),(0,r.jsx)(a(),{href:"/ask",children:"Poser une Question"}),(0,r.jsx)(a(),{href:"/about",children:"\xc0 propos"})]})]})}},6395:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(5893),s=n(7294),a=n(7066),i=n(1163),o=n(9008),l=n.n(o),c=n(4954),u=n(9402);function d(){let[e,t]=(0,s.useState)(""),[n,o]=(0,s.useState)(""),[d,m]=(0,s.useState)(!1),[x,h]=(0,s.useState)(""),[p,g]=(0,s.useState)(!1),[f,b]=(0,s.useState)(0),w=(0,i.useRouter)();(0,s.useEffect)(()=>{let e="true"===localStorage.getItem("isAdmin"),t=parseInt(localStorage.getItem("creditCount"))||0;g(e),b(t),"true"===w.query.success?(localStorage.setItem("creditCount","7"),b(7),alert("✅ Paiement r\xe9ussi. Tu as maintenant 7 questions.")):"true"===w.query.canceled&&alert("❌ Paiement annul\xe9.")},[w.query]);let j=async()=>{if(!p&&f<=0){alert("\uD83D\uDCB8 Tu dois acheter du cr\xe9dit pour poser ta question.");return}if(e.trim()){m(!0),o("");try{let t=(await a.Z.post("/api/ask",{question:e,secretCode:p?x.trim():null})).data.answer;o(t);let n=new SpeechSynthesisUtterance(t);if(n.lang="fr-FR",n.voice=speechSynthesis.getVoices().find(e=>"fr-FR"===e.lang&&e.name.toLowerCase().includes("femme"))||null,n.pitch=1.2,n.rate=1,speechSynthesis.speak(n),!p){let e=f-1;localStorage.setItem("creditCount",e.toString()),b(e)}}catch(e){o("Erreur lors de la connexion avec ton ange.")}m(!1)}},y=async()=>{try{let e=await a.Z.post("/api/create-checkout-session");window.location.href=e.data.url}catch(e){alert("Erreur lors de la redirection vers Stripe.")}};return(0,r.jsxs)("div",{className:"min-h-screen text-white flex flex-col justify-between animate-fade-in bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/celestial.jpg')"},children:[(0,r.jsx)(l(),{children:(0,r.jsx)("title",{children:"✨ Poser une question ✨"})}),(0,r.jsx)(c.Z,{}),(0,r.jsxs)("main",{className:"p-4 max-w-xl mx-auto text-white",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-center mb-4",children:"\uD83D\uDC7C Pose ta question \xe0 ton Ange"}),(0,r.jsx)("p",{className:"text-sm text-center mb-2",children:"Respire profond\xe9ment. Adresse-toi \xe0 Dieu, l'Univers,la Source, ton Ange Gardien ou \xe0 ton Guide Spirituel, poses la question \xe0 haute/bas voix ou dans ton coeur, ensuite, \xe9cris ta question."}),(0,r.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:"\xc9cris ta question ici...",className:"w-full p-2 text-black border rounded mb-2",rows:3}),!p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"password",value:x,onChange:e=>h(e.target.value),placeholder:"Code Admin (facultatif)",className:"w-full p-2 text-black border rounded mb-2"}),(0,r.jsx)("button",{onClick:()=>{"germaineobono12"===x.trim()?(g(!0),localStorage.setItem("isAdmin","true"),alert("\uD83D\uDD11 Mode admin activ\xe9. Acc\xe8s illimit\xe9.")):alert("❌ Code admin incorrect.")},className:"w-full p-2 bg-purple-600 text-white rounded mb-4",children:"Valider le code Admin"})]}),(0,r.jsx)("button",{onClick:j,disabled:d,className:"w-full p-2 rounded mb-2 ".concat(d?"bg-gray-400":"bg-blue-500 text-white"),children:d?"Connexion \xe0 l’ange...":"Poser la question"}),!p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:y,className:"w-full p-2 bg-green-500 text-white rounded",children:"Acheter du cr\xe9dit (1€ pour 7 questions)"}),(0,r.jsxs)("p",{className:"text-center text-sm mt-2 text-yellow-100",children:["Questions restantes : ",f]})]}),n&&(0,r.jsx)("div",{className:"mt-4 p-4 bg-white/10 rounded shadow backdrop-blur-sm text-white",children:(0,r.jsx)("p",{className:"italic",children:n})})]}),(0,r.jsx)(u.Z,{})]})}}},function(e){e.O(0,[996,876,66,888,774,179],function(){return e(e.s=7699)}),_N_E=e.O()}]);